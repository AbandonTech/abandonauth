datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = -1
}

model User {
  id              String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username        String
  discord_account DiscordAccount?
  github_account  GitHubAccount?
  google_account  GoogleAccount?
  developer_applications DeveloperApplication[]
}

model DeveloperApplication {
  id       String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  owner    User   @relation(fields: [owner_id], references: [id])
  owner_id String @unique @db.Uuid
}

model DiscordAccount {
  id      BigInt @id
  user    User   @relation(fields: [user_id], references: [id])
  user_id String @unique @db.Uuid
}

model GitHubAccount {
  id      Int    @id
  user    User   @relation(fields: [user_id], references: [id])
  user_id String @unique @db.Uuid
}

model GoogleAccount {
  id      String @id
  user    User   @relation(fields: [user_id], references: [id])
  user_id String @unique @db.Uuid
}
